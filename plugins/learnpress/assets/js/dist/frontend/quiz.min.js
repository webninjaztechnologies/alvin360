(()=>{var e={8132:()=>{LP.Hook.addAction("lp-compatible-builder",(()=>{LP.Hook.removeAction("lp-compatible-builder"),"undefined"!=typeof elementorFrontend&&[...document.querySelectorAll("#popup-content")][0].addEventListener("scroll",(()=>{Waypoint.refreshAll(),window.dispatchEvent(new Event("resize"))})),"undefined"!=typeof vc_js&&"undefined"!=typeof VcWaypoint&&[...document.querySelectorAll("#popup-content")][0].addEventListener("scroll",(()=>{VcWaypoint.refreshAll()}))})),LP.Hook.addAction("lp-quiz-compatible-builder",(()=>(LP.Hook.removeAction("lp-quiz-compatible-builder"),LP.Hook.doAction("lp-compatible-builder"),"undefined"!=typeof elementorFrontend?window.elementorFrontend.init():"undefined"!=typeof vc_js?("undefined"!=typeof vc_round_charts&&vc_round_charts(),"undefined"!=typeof vc_pieChart&&vc_pieChart(),"undefined"!=typeof vc_line_charts&&vc_line_charts(),window.vc_js()):void 0))),LP.Hook.addAction("lp-question-compatible-builder",(()=>(LP.Hook.removeAction("lp-question-compatible-builder"),LP.Hook.removeAction("lp-quiz-compatible-builder"),LP.Hook.doAction("lp-compatible-builder"),"undefined"!=typeof elementorFrontend?window.elementorFrontend.init():"undefined"!=typeof vc_js?("undefined"!=typeof vc_round_charts&&vc_round_charts(),"undefined"!=typeof vc_pieChart&&vc_pieChart(),"undefined"!=typeof vc_line_charts&&vc_line_charts(),window.vc_js()):void 0)))},2747:e=>{"use strict";function t(e,s){var n;if(Array.isArray(s))for(n=0;n<s.length;n++)t(e,s[n]);else for(n in s)e[n]=(e[n]||[]).concat(s[n])}e.exports=function(e){var s,n={};return t(n,e),(s=function(e){return function(t){return function(s){var i,r,o=n[s.type],a=t(s);if(o)for(i=0;i<o.length;i++)(r=o[i](s,e))&&e.dispatch(r);return a}}}).effects=n,s}},6942:(e,t)=>{var s;!function(){"use strict";var n={}.hasOwnProperty;function i(){for(var e="",t=0;t<arguments.length;t++){var s=arguments[t];s&&(e=o(e,r(s)))}return e}function r(e){if("string"==typeof e||"number"==typeof e)return e;if("object"!=typeof e)return"";if(Array.isArray(e))return i.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var s in e)n.call(e,s)&&e[s]&&(t=o(t,s));return t}function o(e,t){return t?e?e+" "+t:e+t:e}e.exports?(i.default=i,e.exports=i):void 0===(s=function(){return i}.apply(t,[]))||(e.exports=s)}()}},t={};function s(n){var i=t[n];if(void 0!==i)return i.exports;var r=t[n]={exports:{}};return e[n](r,r.exports,s),r.exports}s.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return s.d(t,{a:t}),t},s.d=(e,t)=>{for(var n in t)s.o(t,n)&&!s.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),s.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var n={};(()=>{"use strict";s.r(n),s.d(n,{default:()=>Ke,init:()=>Ze});var e={};s.r(e),s.d(e,{__requestBeforeStartQuiz:()=>ue,__requestCheckAnswerSuccess:()=>fe,__requestShowHintSuccess:()=>_e,__requestStartQuizSuccess:()=>le,__requestSubmitQuiz:()=>de,__requestSubmitQuizSuccess:()=>pe,checkAnswer:()=>we,markQuestionRendered:()=>Se,sendKey:()=>ve,setCurrentPage:()=>ae,setCurrentQuestion:()=>oe,setQuizData:()=>re,setQuizMode:()=>ye,showHint:()=>qe,startQuiz:()=>ce,submitQuiz:()=>he,updateUserQuestionAnswers:()=>me,updateUserQuestionFibAnswers:()=>ge});var t={};s.r(t),s.d(t,{getCurrentQuestion:()=>Ee,getData:()=>Ie,getDefaultRestArgs:()=>Ce,getItemStatus:()=>Qe,getProp:()=>be,getQuestion:()=>Re,getQuestionAnswered:()=>Ae,getQuestionMark:()=>Te,getQuestionOptions:()=>Pe,getQuestions:()=>Ne,getQuestionsSelectedAnswers:()=>De,getQuizAnswered:()=>ke,getQuizAttempts:()=>je,getUserMark:()=>Me,isCheckedAnswer:()=>Oe,isCorrect:()=>Le});const i=window.wp.element,r=window.wp.compose,o=window.wp.data,a=window.ReactJSXRuntime,u=window.wp.i18n,l=e=>{let t;const s=86400;if(e>s)t=(e-e%s)/s,e%=s;else if(e==s)return"24:00";const n=new Date(1e3*e).toUTCString().match(/\d{2}:\d{2}:\d{2}/)[0].split(":");return t&&(n[0]=parseInt(n[0])+24*t),n.join(":")},{Hook:c}=LP,d=()=>{const e=e=>(0,o.select)("learnpress/quiz").getData(e),t=c.applyFilters("quiz-meta-fields",{duration:{title:(0,u.__)("Duration:","learnpress"),name:"duration",content:l(e("duration"))||"--"},passingGrade:{title:(0,u.__)("Passing grade:","learnpress"),name:"passing-grade",content:e("passingGrade")||"--"},questionsCount:{title:(0,u.__)("Questions:","learnpress"),name:"questions-count",content:e("questionIds")?e("questionIds").length:0}});return t&&(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("ul",{className:"quiz-intro",children:Object.values(t).map(((e,t)=>{const s=e.name||t;return(0,a.jsxs)("li",{className:`quiz-intro-item quiz-intro-item--${s}`,children:[(0,a.jsx)("div",{className:"quiz-intro-item__title",dangerouslySetInnerHTML:{__html:e.title}}),(0,a.jsx)("span",{className:"quiz-intro-item__content",dangerouslySetInnerHTML:{__html:e.content}})]},`quiz-intro-field-${t}`)}))})})};class p extends i.Component{startQuiz=e=>{e&&e.preventDefault();const t=document.querySelector(".lp-button.start");t&&t.setAttribute("disabled","disabled"),t.classList.add("loading");const{startQuiz:s,status:n}=this.props;if("completed"===n){const{confirm:e,isOpen:s}=(0,o.select)("learnpress/modal");if("no"===e((0,u.__)("Are you sure you want to retake the quiz?","learnpress"),this.startQuiz))return void(!s()&&t&&t.removeAttribute("disabled"))}s()};nav=e=>t=>{let{questionNav:s,currentPage:n,numPages:i,setCurrentPage:r}=this.props;"prev"===e?n>1?n-=1:n="infinity"===s?i:1:n<i?n+=1:n="infinity"===s?1:i,r(n)};moveTo=e=>t=>{t.preventDefault();const{numPages:s,setCurrentPage:n}=this.props;e<1||e>s||n(e)};isLast=()=>{const{currentPage:e,numPages:t}=this.props;return e===t};isFirst=()=>{const{currentPage:e}=this.props;return 1===e};submit=()=>{const{submitQuiz:e}=this.props,{confirm:t}=(0,o.select)("learnpress/modal");"no"!==t((0,u.__)("Are you sure to submit the quiz?","learnpress"),this.submit)&&e()};setQuizMode=e=>()=>{const{setQuizMode:t}=this.props;t(e)};isReviewing=()=>{const{isReviewing:e}=this.props;return e};pageNumbers(e){const{numPages:t,currentPage:s}=this.props;if(t<2)return"";(e={numPages:t,currentPage:s,midSize:1,endSize:1,prevNext:!0,...e||{}}).endSize<1&&(e.endSize=1),e.midSize<0&&(e.midSize=1);const n=[...Array(t).keys()];let i=!1;return(0,a.jsxs)("div",{className:"nav-links",children:[e.prevNext&&!this.isFirst()&&(0,a.jsx)("button",{className:"page-numbers prev","data-type":"question-navx",onClick:this.nav("prev"),children:(0,u.__)("Prev","learnpress")}),n.map((t=>(t+=1)===e.currentPage?(i=!0,(0,a.jsx)("span",{className:"page-numbers current",children:t},`page-number-${t}`)):t<=e.endSize||e.currentPage&&t>=e.currentPage-e.midSize&&t<=e.currentPage+e.midSize||t>e.numPages-e.endSize?(i=!0,(0,a.jsx)("button",{className:"page-numbers",onClick:this.moveTo(t),children:t},`page-number-${t}`)):i?(i=!1,(0,a.jsx)("span",{className:"page-numbers dots",children:"â€¦"},`page-number-${t}`)):"")),e.prevNext&&!this.isLast()&&(0,a.jsx)("button",{className:"page-numbers next","data-type":"question-navx",onClick:this.nav("next"),children:(0,u.__)("Next","learnpress")})]})}render(){const{status:e,questionNav:t,isReviewing:s,showReview:n,numPages:i,question:r,questionsPerPage:o,canRetry:l,retakeNumber:c,requiredPassword:d,allowRetake:p}=this.props,h=["quiz-buttons"];("started"===e||s)&&h.push("align-center"),"questionNav"===t&&h.push("infinity"),this.isFirst()&&h.push("is-first"),this.isLast()&&h.push("is-last");const m=document.querySelector("#popup-sidebar"),g=document.querySelector("#learn-press-quiz-app");let _="";_="started"===e||s?{marginLeft:m&&m.offsetWidth/2,width:g&&g.offsetWidth}:null;let q=" fixed";return"no"==lpQuizSettings.navigationPosition&&(q=" nav-center"),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:h.join(" "),children:[(0,a.jsxs)("div",{className:"button-left"+("started"===e||s?q:""),style:_,children:[("completed"===e&&l||-1!==["","viewed"].indexOf(e))&&!s&&!d&&(0,a.jsx)("button",{className:"lp-button start",onClick:this.startQuiz,children:"completed"===e?`${(0,u.__)("Retake","learnpress")} ${p?"":" "+(c?` (${c})`:"")} `:" "+(0,u.__)("Start","learnpress")}),("started"===e||s)&&i>1&&(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("div",{className:"questions-pagination",children:this.pageNumbers()})})]}),(0,a.jsxs)("div",{className:"button-right",children:["started"===e&&(0,a.jsx)(a.Fragment,{children:("infinity"===t||this.isLast())&&!s&&(0,a.jsx)("button",{className:"lp-button submit-quiz",onClick:this.submit,children:(0,u.__)("Finish Quiz","learnpress")})}),s&&n&&(0,a.jsx)("button",{className:"lp-button back-quiz",onClick:this.setQuizMode(""),children:(0,u.__)("Result","learnpress")}),"completed"===e&&n&&!s&&(0,a.jsx)("button",{className:"lp-button review-quiz",onClick:this.setQuizMode("reviewing"),children:(0,u.__)("Review","learnpress")})]})]}),this.props.message&&!0!==this.props.success&&(0,a.jsx)("div",{className:"learn-press-message error",children:this.props.message})]})}}const h=(0,r.compose)((0,o.withSelect)((e=>{const{getData:t}=e("learnpress/quiz");return{status:t("status"),showCheck:t("instantCheck"),checkedQuestions:t("checkedQuestions"),hintedQuestions:t("hintedQuestions"),questionsPerPage:t("questionsPerPage")}})))((e=>{const{showCheck:t,checkedQuestions:s,hintedQuestions:n,question:i,status:r,type:o,Button:u}=e;if("started"!==r)return!1;const l=(0,a.jsx)(u,{question:i});switch(o){case"hint":return n?!!i.hasHint&&-1===n.indexOf(i.id)&&l:l;case"check":return!!t&&(s?-1===s.indexOf(i.id)&&l:l)}})),m=(0,r.compose)([(0,o.withSelect)((e=>{const{getData:t,getCurrentQuestion:s}=e("learnpress/quiz"),n={id:t("id"),status:t("status"),questionIds:t("questionIds"),questionNav:t("questionNav"),isReviewing:t("reviewQuestions")&&"reviewing"===t("mode"),showReview:t("reviewQuestions"),showCheck:t("instantCheck"),checkedQuestions:t("checkedQuestions"),hintedQuestions:t("hintedQuestions"),numPages:t("numPages"),pages:t("pages"),currentPage:t("currentPage"),questionsPerPage:t("questionsPerPage"),pageNumbers:t("pageNumbers"),keyPressed:t("keyPressed"),canRetry:t("retakeCount")>0&&t("retaken")<t("retakeCount"),retakeNumber:t("retakeCount")>0&&t("retaken")<t("retakeCount")?t("retakeCount")-t("retaken"):null,message:t("messageResponse")||!1,success:void 0===t("successResponse")||t("successResponse"),requiredPassword:t("requiredPassword"),allowRetake:t("allowRetake")};if(1===n.questionsPerPage&&(n.question=s("object")),1===lpQuizSettings.checkNorequizenroll){const e=window.localStorage.getItem("quiz_off_retaken_"+lpQuizSettings.id);t("retakeCount")>e?(n.retakeNumber=t("retakeCount")-e,n.canRetry=!0):n.canRetry=!1}return n.allowRetake&&(n.canRetry=!0),n})),(0,o.withDispatch)(((e,{id:t})=>{const{startQuiz:s,setCurrentQuestion:n,submitQuiz:i,setQuizMode:r,showHint:o,checkAnswer:a,setCurrentPage:u}=e("learnpress/quiz");return{startQuiz:s,setCurrentQuestion:n,setQuizMode:r,setCurrentPage:u,submitQuiz(e){i(e)},showHint(e){o(e)},checkAnswer(e){a(e)}}}))])(p);class g extends i.Component{showHint=()=>{const{showHint:e,question:t}=this.props;e(t.id,!t.showHint)};render(){const{question:e}=this.props;return e.hint?(0,a.jsx)("button",{className:"btn-show-hint",onClick:this.showHint,children:(0,a.jsx)("span",{children:(0,u.__)("Hint","learnpress")})}):""}}const _=(0,r.compose)((0,o.withDispatch)(((e,{id:t})=>{const{showHint:s}=e("learnpress/quiz");return{showHint(e,t){s(e,t)}}})))(g);var q=s(6942),f=s.n(q);class w extends i.Component{constructor(){super(...arguments),this.state={loading:!1}}checkAnswer=()=>{const{checkAnswer:e,question:t,answered:s}=this.props;"fill_in_blanks"===t.type&&document.querySelector(`.question-fill_in_blanks[data-id="${t.id}"]`).querySelectorAll(".lp-fib-input > input").forEach((s=>{if(s.value.length>0)return this.setState({loading:!0}),e(t.id),!1})),s&&(e(t.id),this.setState({loading:!0}))};render(){const{answered:e}=this.props;return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("button",{className:f()("lp-button","instant-check",{loading:this.state.loading}),onClick:this.checkAnswer,children:[(0,a.jsx)("span",{className:"instant-check__icon"}),(0,u.__)("Check answers","learnpress"),!e&&(0,a.jsx)("div",{className:"instant-check__info",dangerouslySetInnerHTML:{__html:(0,u.__)("You need to answer the question before checking the answer key.","learnpress")}})]})})}}const S=(0,r.compose)((0,o.withSelect)(((e,{question:{id:t}})=>{const{getQuestionAnswered:s}=e("learnpress/quiz");return{answered:s(t)}})),(0,o.withDispatch)(((e,{id:t})=>{const{checkAnswer:s}=e("learnpress/quiz");return{checkAnswer(e){s(e)}}})))(w),y=function(e){const{question:t}=e,s={"instant-check":()=>(0,a.jsx)(h,{type:"check",Button:S,question:t}),hint:()=>(0,a.jsx)(h,{type:"hint",Button:_,question:t})};return(0,a.jsx)(a.Fragment,{children:LP.config.questionFooterButtons().map((e=>(0,a.jsx)(i.Fragment,{children:s[e]&&s[e]()},`button-${e}`)))})},v=window.jQuery,{uniqueId:x,isArray:z,isNumber:P,bind:Q}=lodash;class b extends i.Component{constructor(){super(...arguments),this.state={time:null,showHint:!1},this.$wrap=null}componentDidMount(e){const{question:t,isCurrent:s,markQuestionRendered:n}=this.props;return s&&n(t.id),this.state.time||this.setState({time:new Date}),LP.Hook.doAction("lp-question-compatible-builder"),"undefined"!=typeof MathJax&&void 0!==MathJax.Hub&&MathJax.Hub.Queue(["Typeset",MathJax.Hub]),e}setRef=e=>{this.$wrap=v(e)};parseOptions=e=>(e&&(e=z(e)?e:JSON.parse(CryptoJS.AES.decrypt(e.data,e.key,{format:CryptoJSAesJson}).toString(CryptoJS.enc.Utf8)),e=z(e)?e:JSON.parse(e)),e||[]);getWrapperClass=()=>{const{question:e,answered:t}=this.props,s=["question","question-"+e.type],n=this.parseOptions(e.options);return n.length&&void 0!==n[0].isTrue&&s.push("question-answered"),s};getEditLink=()=>{const{question:e,editPermalink:t}=this.props;return t?t.replace(/post=(.*[0-9])/,`post=${e.id}`):""};editPermalink=e=>(0,u.sprintf)('<a href="%s">%s</a>',e,(0,u.__)("Edit","learnpress"));render(){const{question:e,isShow:t,isShowIndex:s,isShowHint:n,status:r}=this.props,o=LP.questionTypes.default,l=this.getEditLink();l&&jQuery("#wp-admin-bar-edit-lp_question").find(".ab-item").attr("href",l);const c={index:()=>s?(0,a.jsxs)("span",{className:"question-index",children:[s,"."]}):"",title:()=>(0,a.jsx)("span",{dangerouslySetInnerHTML:{__html:e.title}}),hint:()=>(0,a.jsx)(_,{question:e}),"edit-permalink":()=>l&&(0,a.jsx)("span",{dangerouslySetInnerHTML:{__html:this.editPermalink(l)},className:"edit-link"})},d={title:()=>(0,a.jsx)("h4",{className:"question-title",children:LP.config.questionTitleParts().map((e=>(0,a.jsx)(i.Fragment,{children:c[e]&&c[e]()},`title-part-${e}`)))}),content:()=>(0,a.jsx)("div",{className:"question-content",dangerouslySetInnerHTML:{__html:e.content}}),"answer-options":()=>this.$wrap&&(0,a.jsx)(o,{...this.props,$wrap:this.$wrap}),explanation:()=>e.explanation&&(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:"question-explanation-content",children:[(0,a.jsxs)("strong",{className:"explanation-title",children:[(0,u.__)("Explanation","learnpress"),":"]}),(0,a.jsx)("div",{dangerouslySetInnerHTML:{__html:e.explanation}})]})}),hint:()=>e.hint&&!e.explanation&&e.showHint&&(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:"question-hint-content",children:[(0,a.jsxs)("strong",{className:"hint-title",children:[(0,u.__)("Hint","learnpress"),":"]}),(0,a.jsx)("div",{dangerouslySetInnerHTML:{__html:e.hint}})]})}),buttons:()=>"started"===r&&(0,a.jsx)(y,{question:e})},p=LP.config.questionBlocks();return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("div",{className:this.getWrapperClass().join(" "),style:{display:t?"":"none"},"data-id":e.id,ref:this.setRef,children:p.map((e=>(0,a.jsx)(i.Fragment,{children:d[e]?d[e]():""},`block-${e}`)))})})}}const j=(0,r.compose)([(0,o.withSelect)(((e,{question:{id:t}})=>{const{getData:s,getQuestionAnswered:n,getQuestionMark:i}=e("learnpress/quiz");return{status:s("status"),questions:s("question"),answered:n(t),questionsRendered:s("questionsRendered"),editPermalink:s("editPermalink"),numPages:s("numPages"),mark:i(t)||""}})),(0,o.withDispatch)((e=>{const{updateUserQuestionAnswers:t,updateUserQuestionFibAnswers:s,markQuestionRendered:n}=e("learnpress/quiz");return{markQuestionRendered:n,updateUserQuestionAnswers:t,updateUserQuestionFibAnswers:s}}))])(b);class k extends i.Component{constructor(e){super(...arguments),this.needToTop=!1,this.state={isReviewing:null,currentPage:0,self:this}}static getDerivedStateFromProps(e,t){const s=["isReviewing","currentPage"],n={};for(let i=0;i<s.length;i++)e[s[i]]!==t[s[i]]&&(n[s[i]]=e[s[i]]);return Object.values(n).length?(t.self.needToTop=!0,n):null}componentDidUpdate(){this.needToTop&&(jQuery("#popup-content").animate({scrollTop:0}).find(".content-item-scrollable:last").animate({scrollTop:0}),this.needToTop=!1)}startQuiz=e=>{e.preventDefault();const{startQuiz:t}=this.props;t()};isInVisibleRange=(e,t)=>{const{currentPage:s,questionsPerPage:n}=this.props;return s===Math.ceil(t/n)};nav=e=>{const{sendKey:t}=this.props;switch(e.keyCode){case 37:return t("left");case 38:case 40:return;case 39:return t("right");default:e.keyCode>=49&&e.keyCode<=57&&t(e.keyCode-48)}};render(){const{status:e,currentQuestion:t,questions:s,questionsRendered:n,isReviewing:i,questionsPerPage:r}=this.props;let o=!0;return"completed"!==e||i||(o=!1),(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("div",{tabIndex:100,onKeyUp:this.nav,children:(0,a.jsx)("div",{className:"quiz-questions",style:{display:o?"":"none"},children:s.map(((e,s)=>{const i=!r&&t===e.id,o=n&&-1!==n.indexOf(e.id),u=this.isInVisibleRange(e.id,s+1);return o||!o||u?(0,a.jsx)(j,{isCurrent:i,isShow:u,isShowIndex:!!r&&s+1,questionsPerPage:r,question:e},`loop-question-${e.id}`):""}))})})})}}const N=(0,r.compose)((0,o.withSelect)(((e,t,s)=>{const{getData:n,getQuestions:i}=e("learnpress/quiz");return{status:n("status"),currentQuestion:n("currentQuestion"),questions:i(),questionsRendered:n("questionsRendered"),isReviewing:"reviewing"===n("mode"),numPages:n("numPages"),currentPage:n("currentPage"),questionsPerPage:n("questionsPerPage")||1}})),(0,o.withDispatch)((e=>{const{startQuiz:t,sendKey:s}=e("learnpress/quiz");return{startQuiz:t,sendKey:s}})))(k),I=()=>{const e=(0,o.select)("learnpress/quiz").getData("attempts")||[],t=e&&!!e.length;return!!t&&(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:"quiz-attempts",children:[(0,a.jsx)("h4",{className:"attempts-heading",children:(0,u.__)("Last Attempt","learnpress")}),t&&(0,a.jsxs)("table",{children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"quiz-attempts__questions",children:(0,u.__)("Questions","learnpress")}),(0,a.jsx)("th",{className:"quiz-attempts__spend",children:(0,u.__)("Time spent","learnpress")}),(0,a.jsx)("th",{className:"quiz-attempts__marks",children:(0,u.__)("Marks","learnpress")}),(0,a.jsx)("th",{className:"quiz-attempts__grade",children:(0,u.__)("Passing grade","learnpress")}),(0,a.jsx)("th",{className:"quiz-attempts__result",children:(0,u.__)("Result","learnpress")})]})}),(0,a.jsx)("tbody",{children:e.map(((e,t)=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"quiz-attempts__questions",children:`${e.questionCorrect} / ${e.questionCount}`}),(0,a.jsx)("td",{className:"quiz-attempts__spend",children:e.timeSpend||"--"}),(0,a.jsx)("td",{className:"quiz-attempts__marks",children:`${e.userMark} / ${e.mark}`}),(0,a.jsx)("td",{className:"quiz-attempts__grade",children:e.passingGrade||"-"}),(0,a.jsxs)("td",{className:"quiz-attempts__result",children:[`${parseFloat(e.result).toFixed(2)}%`," ",(0,a.jsx)("span",{children:e.graduationText})]})]},`attempt-${t}`)))})]})]})})},C=()=>{const{getData:e}=(0,o.select)("learnpress/quiz"),{submitQuiz:t}=(0,o.dispatch)("learnpress/quiz"),s=e("totalTime"),n=e("duration"),[r,u]=(0,i.useState)(s);let[l,c]=(0,i.useState)(0);return(0,i.useEffect)((()=>{const e=setInterval((()=>{if(n>0){let s=r;s-=1,s=wp.hooks.applyFilters("js-lp-quiz-remaining_time",s,n),s>0?(u(s),l++,c(n-s)):(clearInterval(e),t())}else l++,c(l),u(l)}),1e3);return()=>clearInterval(e)}),[r,l]),(0,a.jsxs)("div",{className:"countdown",children:[(0,a.jsx)("i",{className:"lp-icon-stopwatch"}),(0,a.jsx)("span",{children:((e=":")=>{const t=[];let n;return s<3600?(t.push((r-r%60)/60),t.push(r%60)):s&&(t.push((r-r%3600)/3600),n=r%3600,t.push((n-n%60)/60),t.push(n%60)),t.map((e=>e<10?`0${e}`:e)).join(e)})()}),(0,a.jsx)("input",{type:"hidden",name:"lp-quiz-time-spend",value:l})]})},A=window.wp.url,T=jQuery;let E=null;const R={elLPOverlay:null,elMainContent:null,elTitle:null,elBtnYes:null,elBtnNo:null,elFooter:null,elCalledModal:null,callBackYes:null,instance:null,init(){return!!this.instance||(this.elLPOverlay=T(".lp-overlay"),!!this.elLPOverlay.length&&(E=this.elLPOverlay,this.elMainContent=E.find(".main-content"),this.elTitle=E.find(".modal-title"),this.elBtnYes=E.find(".btn-yes"),this.elBtnNo=E.find(".btn-no"),this.elFooter=E.find(".lp-modal-footer"),T(document).on("click",".close, .btn-no",(function(){E.hide()})),T(document).on("click",".btn-yes",(function(e){e.preventDefault(),e.stopPropagation(),"function"==typeof R.callBackYes&&R.callBackYes(e)})),this.instance=this,!0))},setElCalledModal(e){this.elCalledModal=e},setContentModal(e,t){this.elMainContent.html(e),"function"==typeof t&&t()},setTitleModal(e){this.elTitle.html(e)}},O=R,L={elBtnFinishCourse:null,elBtnCompleteItem:null,init(){O.init()&&void 0!==lpGlobalSettings&&"yes"===lpGlobalSettings.option_enable_popup_confirm_finish&&(this.elBtnFinishCourse=document.querySelectorAll(".lp-btn-finish-course"),this.elBtnCompleteItem=document.querySelector(".lp-btn-complete-item"),this.elBtnCompleteItem&&this.elBtnCompleteItem.addEventListener("click",(e=>{e.preventDefault();const t=e.target.closest("form");O.elLPOverlay.show(),O.setTitleModal(t.dataset.title),O.setContentModal('<div class="pd-2em">'+t.dataset.confirm+"</div>"),O.callBackYes=()=>{t.submit()}})),this.elBtnFinishCourse&&this.elBtnFinishCourse.forEach((e=>e.addEventListener("click",(e=>{e.preventDefault();const t=e.target.closest("form");O.elLPOverlay.show(),O.setTitleModal(t.dataset.title),O.setContentModal('<div class="pd-2em">'+t.dataset.confirm+"</div>"),O.callBackYes=()=>{t.submit()}})))))}},{debounce:D}=lodash,M=()=>{const[e,t]=(0,i.useState)(0),[s,n]=(0,i.useState)(!1),r=(0,o.useSelect)((e=>e("learnpress/quiz").getData("id")),[]),l=(0,o.useSelect)((e=>e("learnpress/quiz").getData("results")),[]),c=(0,o.useSelect)((e=>e("learnpress/quiz").getData("passingGrade")),[]),d=(0,o.useSelect)((e=>e("learnpress/quiz").getData("submitting")),[]);(0,i.useEffect)((()=>{h();let e="";if(e=l.graduation?l.graduation:l.result>=q?"passed":"failed",e){const t=document.querySelector(`.course-curriculum .course-item.course-item-${r}`);t&&(t.classList.remove("failed","passed"),t.classList.add("has-status","status-completed",e))}const t=[...document.querySelectorAll("#popup-header .items-progress")][0],s=document.querySelector(".curriculum-sections");if(t&&s){const e=t.dataset.totalItems,s=t.querySelector(".items-completed"),n=t.querySelector(".learn-press-progress__active");if(s){const t=document.querySelectorAll("#popup-sidebar .course-curriculum .course-item.status-completed");s.textContent=parseInt(t.length);const i=100-100*parseInt(t.length)/parseInt(e);n.style.left="-"+i+"%"}}}),[l]),(0,i.useEffect)((()=>{void 0!==d&&p()}),[d]);const p=()=>{const e=document.querySelectorAll(".popup-header__inner");e.length>0&&0===e[0].querySelectorAll("form.form-button-finish-course").length&&(async e=>{const t=await wp.apiFetch({path:(0,A.addQueryArgs)("lp/v1/lazy-load/items-progress",{courseId:lpGlobalSettings.post_id||"",userId:lpGlobalSettings.user_id||""}),method:"GET"}),{data:s}=t;e.innerHTML+=s,e.classList.add("can-finish-course"),L.init()})(e[0])},h=()=>{t(0),n(!1),jQuery.easing._customEasing=function(e,t,s,n,i){return n*Math.sqrt(1-(t=t/i-1)*t)+s},D((()=>{const e=jQuery("<span />").css({width:1,height:1}).appendTo(document.body);e.css("left",0).animate({left:l.result},{duration:1500,step:(e,s)=>{t(e)},done:()=>{n(!0),e.remove(),jQuery("#quizResultGrade").css({transform:"scale(1.3)",transition:"all 0.25s"}),D((()=>{jQuery("#quizResultGrade").css({transform:"scale(1)"})}),500)()},easing:"_customEasing"})}),l.result>0?1e3:10)()};let m=e;Number.isInteger(e)||(m=parseFloat(e).toFixed(2));const g=190*Math.PI,_={strokeDasharray:`${g} ${g}`,strokeDashoffset:g-m/100*g},q=parseFloat(l.passingGrade||c);let f="";f=l.graduation?l.graduation:m>=q?"passed":"failed";let w="";w=l.graduationText?l.graduationText:"passed"===f?(0,u.__)("Passed","learnpress"):(0,u.__)("Failed","learnpress");const S=["quiz-result",f];return(0,a.jsxs)("div",{className:S.join(" "),children:[(0,a.jsx)("h3",{className:"result-heading",children:(0,u.__)("Your Result","learnpress")}),(0,a.jsxs)("div",{id:"quizResultGrade",className:"result-grade",children:[(0,a.jsx)("svg",{className:"circle-progress-bar",width:200,height:200,children:(0,a.jsx)("circle",{className:"circle-progress-bar__circle",stroke:"",strokeWidth:10,style:_,fill:"transparent",r:95,cx:100,cy:100})}),(0,a.jsx)("span",{className:"result-achieved",children:`${m}%`}),(0,a.jsx)("span",{className:"result-require",children:q+"%"||0})]}),s&&(0,a.jsx)("p",{className:"result-message",children:w}),(0,a.jsxs)("ul",{className:"result-statistic",children:[(0,a.jsxs)("li",{className:"result-statistic-field result-time-spend",children:[(0,a.jsx)("span",{children:(0,u.__)("Time spent","learnpress")}),(0,a.jsx)("p",{children:l.timeSpend})]}),(0,a.jsxs)("li",{className:"result-statistic-field result-point",children:[(0,a.jsx)("span",{children:(0,u.__)("Points","learnpress")}),(0,a.jsxs)("p",{children:[l.userMark," / ",l.mark]})]}),(0,a.jsxs)("li",{className:"result-statistic-field result-questions",children:[(0,a.jsx)("span",{children:(0,u.__)("Questions","learnpress")}),(0,a.jsx)("p",{children:l.questionCount})]}),(0,a.jsxs)("li",{className:"result-statistic-field result-questions-correct",children:[(0,a.jsx)("span",{children:(0,u.__)("Correct","learnpress")}),(0,a.jsx)("p",{children:l.questionCorrect})]}),(0,a.jsxs)("li",{className:"result-statistic-field result-questions-wrong",children:[(0,a.jsx)("span",{children:(0,u.__)("Wrong","learnpress")}),(0,a.jsx)("p",{children:l.questionWrong})]}),(0,a.jsxs)("li",{className:"result-statistic-field result-questions-skipped",children:[(0,a.jsx)("span",{children:(0,u.__)("Skipped","learnpress")}),(0,a.jsx)("p",{children:l.questionEmpty})]}),void 0!==l.minusPoint&&(0,a.jsxs)("li",{className:"result-statistic-field result-questions-minus",children:[(0,a.jsx)("span",{children:(0,u.__)("Minus points","learnpress")}),(0,a.jsx)("p",{children:l.minusPoint})]})]})]})},U=jQuery,{debounce:F}=lodash,H=()=>{const{submitQuiz:e}=(0,o.dispatch)("learnpress/quiz");(0,i.useEffect)((()=>{const e=U("#popup-content");if(!e.length)return;const t=e.find(".content-item-scrollable:eq(1)"),s=e.find(".quiz-status").offset().top-92;let n=!1;t.on("scroll",(()=>{if(t.scrollTop()>=s){if(n)return;n=!0}else{if(!n)return;n=!1}n?e.addClass("fixed-quiz-status"):e.removeClass("fixed-quiz-status")}))}),[]);const t=()=>{const{confirm:s}=(0,o.select)("learnpress/modal");"no"!==s((0,u.__)("Are you sure to submit the quiz?","learnpress"),t)&&e()},{getData:s,getUserMark:n}=(0,o.select)("learnpress/quiz"),r=s("currentPage"),l=s("questionsPerPage"),c=s("numberQuestionsToDo"),d=s("submitting"),p=(s("duration"),n()),h=["quiz-status"],m=(r-1)*l+1;let g=m+l-1,_="";return g=Math.min(g,c),d&&h.push("submitting"),_=g<c?l>1?(0,u.sprintf)((0,u.__)("Question <span>%d to %d of %d</span>","learnpress"),m,g,c):(0,u.sprintf)((0,u.__)("Question <span>%d of %d</span>","learnpress"),m,c):(0,u.sprintf)((0,u.__)("Question <span>%d of %d</span>","learnpress"),m,g),(0,a.jsx)("div",{className:h.join(" "),children:(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"questions-index",dangerouslySetInnerHTML:{__html:_}}),(0,a.jsx)("div",{className:"current-point",children:(0,u.sprintf)((0,u.__)("Earned Point: %s","learnpress"),p)}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"submit-quiz",children:(0,a.jsx)("button",{className:"lp-button",id:"button-submit-quiz",onClick:t,children:d?(0,u.__)("Submittingâ€¦","learnpress"):(0,u.__)("Finish Quiz","learnpress")})}),(0,a.jsx)(C,{})]})]})})},{omit:$,flow:B,isArray:J,chunk:W}=lodash,{camelCaseDashObjectKeys:G}=LP,{get:K,set:Z}=LP.localStorage,Y={},V=(e,t)=>(t.currentPage&&Z(`Q${e.id}.currentPage`,t.currentPage),{...e,...t}),X=B(o.combineReducers,(e=>(t,s)=>e(t,s)),(e=>(t,s)=>e(t,s)),(e=>(t,s)=>e(t,s)))({a:(e={a:1},t)=>e,b:(e={b:2},t)=>e}),ee=(0,o.combineReducers)({blocks:X,userQuiz:(e=Y,t)=>{switch(t.type){case"SET_QUIZ_DATA":1>t.data.questionsPerPage&&(t.data.questionsPerPage=1);const s=W(e.questionIds||t.data.questionIds,t.data.questionsPerPage);return t.data.numPages=s.length,t.data.pages=s,{...e,...t.data,currentPage:K(`Q${t.data.id}.currentPage`)||t.data.currentPage};case"SUBMIT_QUIZ":return{...e,submitting:!0};case"START_QUIZ":case"START_QUIZ_SUCCESS":return((e,t)=>{const s=void 0!==t.results.success&&t.results.success,n=t.results.message||!1,i=W(t.results.results.questionIds,e.questionsPerPage);return e.numPages=i.length,V(e,{checkedQuestions:[],hintedQuestions:[],mode:"",currentPage:1,...t.results.results,successResponse:s,messageResponse:n})})(e,t);case"SET_CURRENT_QUESTION":return Z(`Q${e.id}.currentQuestion`,t.questionId),{...e,currentQuestion:t.questionId};case"SET_CURRENT_PAGE":return Z(`Q${e.id}.currentPage`,t.currentPage),{...e,currentPage:t.currentPage};case"SUBMIT_QUIZ_SUCCESS":return((e,t)=>{localStorage.removeItem(`LP_Quiz_${e.id}_Answered`);const s=e.questions.map((s=>{const n={};return e.reviewQuestions&&(t.results.questions[s.id]?.explanation&&(n.explanation=t.results.questions[s.id].explanation),t.results.questions[s.id]?.options&&(n.options=t.results.questions[s.id].options)),{...s,...n}}));return V(e,{submitting:!1,currentPage:1,...t.results,questions:[...s]})})(e,t);case"UPDATE_USER_QUESTION_ANSWERS":return"started"===e.status?((e,t)=>{const{answered:s,id:n}=e,i={...s[t.questionId]||{},answered:t.answers,temp:!0};return n&&localStorage.setItem(`LP_Quiz_${n}_Answered`,JSON.stringify({...e.answered,[t.questionId]:i})),{...e,answered:{...e.answered,[t.questionId]:i}}})(e,t):e;case"UPDATE_USER_QUESTION_FIB_ANSWERS":return"started"===e.status?((e,t)=>{const{id:s}=e,{questionId:n,idInput:i,valueInput:r}=t;return e.answered.hasOwnProperty(n)?e.answered[n].answered[i]=r:e.answered[t.questionId]={answered:{[i]:r},temp:!0},localStorage.setItem(`LP_Quiz_${s}_Answered`,JSON.stringify(e.answered)),e})(e,t):e;case"MARK_QUESTION_RENDERED":return((e,t)=>{const{questionsRendered:s}=e;return J(s)?(s.push(t.questionId),{...e,questionsRendered:[...s]}):{...e,questionsRendered:[t.questionId]}})(e,t);case"SET_QUIZ_MODE":return"reviewing"==t.mode?V(e,{mode:t.mode}):{...e,mode:t.mode};case"SET_QUESTION_HINT":return((e,t)=>{const s=e.questions.map((e=>e.id==t.questionId?{...e,showHint:t.showHint}:e));return{...e,questions:[...s]}})(e,t);case"CHECK_ANSWER":return((e,t)=>{const s=e.questions.map((e=>{if(e.id!==t.questionId)return e;const s={explanation:t.explanation};return t.options&&(s.options=t.options),{...e,...s}})),n={...e.answered,[t.questionId]:t.result};let i=localStorage.getItem(`LP_Quiz_${e.id}_Answered`);return i&&(i={...JSON.parse(i),...n},localStorage.setItem(`LP_Quiz_${e.id}_Answered`,JSON.stringify(i))),{...e,questions:[...s],answered:n,checkedQuestions:[...e.checkedQuestions,t.questionId]}})(e,t);case"SEND_KEY":return{...e,keyPressed:t.keyPressed}}return e}}),te=window.LP.dataControls;function se(){const e=[].slice.call(arguments,2);(0,o.dispatch)(arguments[0])[arguments[1]](...e)}const{camelCaseDashObjectKeys:ne,Hook:ie}=LP;function re(e,t){return{type:"SET_QUIZ_DATA",data:ne(t="string"==typeof e?{[e]:t}:e)}}function oe(e){return{type:"SET_CURRENT_QUESTION",questionId:e}}function ae(e){return{type:"SET_CURRENT_PAGE",currentPage:e}}function ue(e,t,s){return{type:"BEFORE_START_QUIZ"}}function le(e,t,s,n){return ie.doAction("quiz-started",e,t,s,n),{type:"START_QUIZ_SUCCESS",quizId:t,courseId:s,userId:n,results:e}}const ce=function*(){const{itemId:e,courseId:t}=(0,o.select)("learnpress/quiz").getDefaultRestArgs();if(!0!==ie.applyFilters("before-start-quiz",!0,e,t))return;let s=yield(0,te.apiFetch)({path:"lp/v1/users/start-quiz",method:"POST",data:{item_id:e,course_id:t}});const n=document.querySelector(".lp-button.start");if("error"!==s.status){s=ie.applyFilters("request-start-quiz-response",s,e,t);const{results:n}=s,{duration:i,status:r,question_ids:o,questions:a}=n;if(1===lpQuizSettings.checkNorequizenroll){const e="quiz_off_"+lpQuizSettings.id;window.localStorage.removeItem(e);const t={endTime:Date.now()+1e3*i,status:r,question_ids:o,questions:a};window.localStorage.setItem(e,JSON.stringify(t));const s="quiz_off_retaken_"+lpQuizSettings.id;let n=window.localStorage.getItem(s);null===n?n=0:n++,window.localStorage.setItem(s,n)}window.localStorage.removeItem("LP"),window.location.reload()}else{const e=document.querySelector(".quiz-buttons"),t=`<div class="learn-press-message error">${s.message}</div>`;e.insertAdjacentHTML("afterend",t),n.classList.remove("loading")}};function de(){return{type:"SUBMIT_QUIZ"}}function pe(e,t,s){return ie.doAction("quiz-submitted",e,t,s),{type:"SUBMIT_QUIZ_SUCCESS",results:e}}function*he(){const{getDefaultRestArgs:e,getQuestionsSelectedAnswers:t}=(0,o.select)("learnpress/quiz"),{itemId:s,courseId:n}=e();if(!0!==ie.applyFilters("before-submit-quiz",!0))return;const i=t();if(1===lpQuizSettings.checkNorequizenroll){const e=`quiz_off_${lpQuizSettings.id}`,t=window.localStorage.getItem(e),n=JSON.parse(t),r=`LP_Quiz_${s}_Answered`,o=localStorage.getItem(r);if(null!==o){const e=JSON.parse(o);for(const[t,s]of Object.entries(e))i[t]=s.answered}n.question_ids.forEach((e=>{i[e]||(i[e]="")}))}let r=0;const a=document.querySelector("input[name=lp-quiz-time-spend]");a&&(r=a.value);let u=yield(0,te.apiFetch)({path:"lp/v1/users/submit-quiz",method:"POST",data:{item_id:s,course_id:n,answered:i,time_spend:r}});if(u=ie.applyFilters("request-submit-quiz-response",u,s,n),"success"===u.status){if(1===lpQuizSettings.checkNorequizenroll){const e="quiz_off_"+lpQuizSettings.id,t=window.localStorage.getItem(e);if(null!==t){const s=JSON.parse(t);s.status=u.results.status,s.results=u.results.results,window.localStorage.setItem(e,JSON.stringify(s)),window.localStorage.removeItem("LP_Quiz_"+lpQuizSettings.id+"_Answered")}}yield se("learnpress/quiz","__requestSubmitQuizSuccess",ne(u.results),s,n)}}function me(e,t,s,n=0,i=0){return{type:"UPDATE_USER_QUESTION_ANSWERS",questionId:e,answers:t}}function ge(e,t,s,n,i=0,r=0){return{type:"UPDATE_USER_QUESTION_FIB_ANSWERS",questionId:e,idInput:t,valueInput:s}}function _e(e,t){return{type:"SET_QUESTION_HINT",questionId:e,showHint:t}}function*qe(e,t){yield se("learnpress/quiz","__requestShowHintSuccess",e,t)}function fe(e,t){return{type:"CHECK_ANSWER",questionId:e,...t}}function*we(e){const{getDefaultRestArgs:t,getQuestionAnswered:s}=(0,o.select)("learnpress/quiz"),{itemId:n,courseId:i}=t(),r=yield(0,te.apiFetch)({path:"lp/v1/users/check-answer",method:"POST",data:{item_id:n,course_id:i,question_id:e,answered:s(e)||""}});if("success"===r.status){if(1===lpQuizSettings.checkNorequizenroll){const t="quiz_off_"+lpQuizSettings.id,s=window.localStorage.getItem(t);if(null!==s){const n=JSON.parse(s),i=r.options;void 0===n.checked_questions?(n.checked_questions=[],n.checked_questions.push(e)):-1===n.checked_questions.indexOf(e)&&n.checked_questions.push(e),void 0===n.question_options?(n.question_options={},n.question_options[e]=i):void 0===n.question_options[e]&&(n.question_options[e]=i),window.localStorage.setItem(t,JSON.stringify(n))}}yield se("learnpress/quiz","__requestCheckAnswerSuccess",e,ne(r))}}function Se(e){return{type:"MARK_QUESTION_RENDERED",questionId:e}}function ye(e){return{type:"SET_QUIZ_MODE",mode:e}}function ve(e){return setTimeout((()=>{se("learnpress/quiz","sendKey","")}),300),{type:"SEND_KEY",keyPressed:e}}const{get:xe,isArray:ze}=lodash,Pe=function(e,t){console.time("parseOptions");let s=Re(e,t).options;return s=ze(s)?s:JSON.parse(CryptoJS.AES.decrypt(s.data,s.key,{format:CryptoJSAesJson}).toString(CryptoJS.enc.Utf8)),s=ze(s)?s:JSON.parse(s),console.timeEnd("parseOptions"),s};function Qe(e,t){const s=(0,o.select)("course-learner/user").getItemById(t);return s?xe(s,"userSettings.status"):""}function be(e,t,s){return e[t]||s}function je(e,t){const s=(0,o.select)("course-learner/user").getItemById(t);return s?xe(s,"userSettings.attempts"):[]}function ke(e,t){const s=(0,o.select)("course-learner/user").getItemById(t);return s?xe(s,"userSettings.answered",{}):{}}function Ne(e){const{userQuiz:t}=e,s=xe(t,"questions");return s?Object.values(s):[]}function Ie(e,t){const{userQuiz:s}=e;return t?xe(s,t):s}function Ce(e){const{userQuiz:t}=e;return{itemId:t.id,courseId:t.courseId}}function Ae(e,t){const{userQuiz:s}=e;return xe(s,`answered.${t}.answered`)||void 0}function Te(e,t){const{userQuiz:s}=e;return xe(s,`answered.${t}.mark`)||void 0}function Ee(e,t=""){if((xe(e,"userQuiz.questionsPerPage")||1)>1)return!1;const s=xe(e,"userQuiz.currentPage")||1;return xe(e,"object"===t?`userQuiz.questions[${s-1}]`:`userQuiz.questionIds[${s-1}]`)}const Re=function(e,t){const{userQuiz:s}=e;return(0,o.select)("learnpress/quiz").getQuestions().find((e=>e.id==t))};function Oe(e,t){return-1!==(xe(e,"userQuiz.checkedQuestions")||[]).indexOf(t)}function Le(e,t){}const De=function(e,t){const s=xe(e,"userQuiz.answered"),n={};for(const e in s)if(s.hasOwnProperty(e)&&(s[e].temp||s[e].blanks)){if(t&&e===t)return s[e].answered;n[e]=s[e].answered}return n};function Me(e){const t=e.userQuiz||{},{answered:s,negativeMarking:n,questions:i,checkedQuestions:r}=t;let o=0;for(let e in s){if(!s.hasOwnProperty(e))continue;e=parseInt(e);const t=s[e],a=t.questionMark?t.questionMark:function(){const t=i.find((t=>t.id===e));return t?t.point:0}();r.indexOf(e),t.temp||(n?t.answered&&(o=t.correct?o+t.mark:o-a):t.answered&&t.correct&&(o+=t.mark))}return o>0?o:0}var Ue=s(2747),Fe=s.n(Ue);const He={ENROLL_COURSE_X:(e,t)=>{}},{controls:$e}=LP.dataControls;!function(e){let t=()=>{throw new Error("Dispatching while constructing your middleware is not allowed. Other middleware would not be applied to this dispatch.")};const s={getState:e.getState,dispatch:(...e)=>t(...e)};t=Fe()(He)(s)(e.dispatch),e.dispatch=t}((0,o.registerStore)("learnpress/quiz",{reducer:ee,selectors:t,actions:e,controls:{...$e}}));const{chunk:Be}=lodash;class Je extends i.Component{constructor(e){super(...arguments),this.state={currentPage:1,numPages:0,pages:[]}}componentDidMount(){const{settings:e,setQuizData:t}=this.props,{question_ids:s,questions_per_page:n}=e,i=Be(s,n);e.currentPage=1,e.numPages=i.length,e.pages=i;const r=!!e.id&&localStorage.getItem(`LP_Quiz_${e.id}_Answered`);r&&(e.answered=JSON.parse(r)),t(e)}componentDidUpdate(e,t,s){const{status:n}=e,i=document.querySelector(".quiz-content");void 0!==n&&i&&(i.style.display="none")}startQuiz=e=>{this.props.startQuiz()};render(){const{status:e,isReviewing:t,answered:s}=this.props;wp.hooks.doAction("lp-js-quiz-answer",s,e);const n=-1!==["","completed","viewed"].indexOf(e)||!e,i=-1!==["","viewed",void 0].indexOf(e)||!e;return void 0!==e&&(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{children:[!t&&"completed"===e&&(0,a.jsx)(M,{}),!t&&i&&(0,a.jsx)(d,{}),"started"===e&&(0,a.jsx)(H,{}),(-1!==["completed","started"].indexOf(e)||t)&&(0,a.jsx)(N,{}),(0,a.jsx)(m,{}),n&&!t&&(0,a.jsx)(I,{})]})})}}const We=(0,r.compose)([(0,o.withSelect)((e=>{const{getQuestions:t,getData:s}=e("learnpress/quiz");return{questions:t(),status:s("status"),store:s(),answered:s("answered"),isReviewing:"reviewing"===s("mode"),questionIds:s("questionIds"),checkCount:s("instantCheck"),questionsPerPage:s("questionsPerPage")||1}})),(0,o.withDispatch)((e=>{const{setQuizData:t,startQuiz:s}=e("learnpress/quiz");return{setQuizData:t,startQuiz:s}}))])(Je);s(8132);const{modal:{default:Ge}}=LP,Ke=We,Ze=(e,t)=>{if(1===lpQuizSettings.checkNorequizenroll){const e="quiz_off_"+lpQuizSettings.id,s=window.localStorage.getItem(e);if(null!==s){const e=JSON.parse(s);if(t.status=e.status,t.questions=e.questions,"started"===e.status){const s=Date.now();t.total_time=Math.floor((e.endTime-s)/1e3)}else"completed"===e.status&&(t.results=e.results,t.answered=e.results.answered,t.questions=e.results.questions);if(void 0!==e.checked_questions&&(t.checked_questions=e.checked_questions),void 0!==e.question_options)for(const s in t.questions){const n=t.questions[s];void 0!==e.question_options[n.id]&&(n.options=e.question_options[n.id]),t.questions[s]=n}}}wp.element.render((0,a.jsx)(Ge,{children:(0,a.jsx)(We,{settings:t})}),[...document.querySelectorAll(e)][0]),LP.Hook.doAction("lp-quiz-compatible-builder")}})(),(window.LP=window.LP||{}).quiz=n})();