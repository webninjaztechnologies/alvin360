"use strict";function changeHeight(e){var t=e.target.value;e.target.style.height="auto",e.target.style.height=e.target.scrollHeight/16+"em",13!=e.keyCode||e.shiftKey||lineIndex===countLines(t)+1&&(""!==t.trim()&&e.target.closest("form.socialv-comment-form").querySelector("button.ac_form_submit").click(),e.stopPropagation())}function swiperSlider(e){e.forEach(function(t){var a={spaceBetween:16,pagination:{el:".swiper-pagination",dynamicBullets:!0,clickable:!0}},i=new Swiper(t,a);document.addEventListener("theme_scheme_direction",function(e){i.destroy(!0,!0),setTimeout(function(){i=new Swiper(t,a)},500)})})}function socialv_legacy_theme_hide_comments(){var a,i,e,t=jQuery("div.activity-comments-list");if(!t.length)return!1;t.each(function(){var t;jQuery(this).children("ul").children("li").length<2||(e=jQuery(this),a=e.parents("#activity-stream > li"),e=jQuery(this).children("ul").children("li"),i="",jQuery("#"+a.attr("id")+' li[id*="acomment-"]').length&&(i=jQuery("#"+a.attr("id")+' li[id*="acomment-"]').length),t=0,e.each(function(e){3<=t?jQuery(this).hide():(jQuery(this).show(),t++),e||jQuery(this).closest(".activity-comments-list").prev().before('<a class="comment-info show-activity-comments" data-bs-toggle="modal" data-bs-target="#activityPopup" href="#'+a.attr("id")+'/show-all/">'+BP_DTheme.show_x_comments.replace("%d",i)+"</a>")}))})}function domLoadingComplete(){var e=document.querySelectorAll(".socialv-swiper-slider:not(.swiper-initialized)");0<e.length&&swiperSlider(e),document.getElementById("activity-stream")&&document.getElementById("activity-stream").addEventListener("DOMNodeInserted",function(e){"LI"==e.target.tagName&&null!=e.target.querySelector(".activity-content .swiper")&&0<(e=e.target.querySelectorAll(".activity-content .swiper")).length&&swiperSlider(e)}),document.querySelector(".activity-comments-list ul.activity-comments")&&document.querySelector(".activity-comments-list ul.activity-comments").addEventListener("DOMNodeRemoved",function(e){var t,a;"LI"==e.target.tagName&&e.target.closest(".activity-comments-list").parentElement.querySelector("div.show-all-comments a")&&(t=e.target.parentElement.querySelectorAll("li").length-1,a=e.target.closest(".activity-comments-list").parentElement.querySelector("div.show-all-comments a"),t<3?(a.remove(),[].forEach.call(e.target.parentElement.querySelectorAll("li"),function(e){e.removeAttribute("style")})):a.textContent=BP_DTheme.show_x_comments.replace("%d",t))}),document.addEventListener("click",function(e){e.target.hash&&"#newest"==e.target.hash&&document.getElementById("buddypress")&&(document.body.scrollTop=document.getElementById("buddypress").offsetTop,document.documentElement.scrollTop=document.getElementById("buddypress").offsetTop),null!=(document.querySelector(".show-all-comments")?document.querySelector(".show-all-comments"):null)&&e.target.parentElement.classList.contains("show-all-comments")&&(e.target.parentElement.style.display="none",[].forEach.call(e.target.closest(".show-all-comments").parentElement.querySelectorAll("ul.activity-comments li"),function(e){e.removeAttribute("style")}))})}function LoadbpGiphy(){0<jQuery(".bp-giphy-icon").length&&jQuery(document).on("click",".bp-giphy-icon",function(e){var t=jQuery(this).next();jQuery(t).addClass("show"),0!=jQuery(".bp-giphy-media-search-dropdown").not(t).length&&jQuery(".bp-giphy-media-search-dropdown").not(t).each(function(e,t){jQuery(t).removeClass("show")})})}document.addEventListener("readystatechange",function(e){"complete"==document.readyState&&domLoadingComplete()}),function(o){o(document).ready(function(){o(document).on("click",".socialv-acomment-reply",function(e){e.preventDefault();var e="",t=o(this),a=t.attr("comment-id"),e=t.closest(".socialv-activity-parent").find("form#"+a).clone();t.closest(".socialv-activity-parent").find("form#"+a).remove(),t.hasClass("active")&&(t.removeClass("active"),e.is(":hidden"))||e.hide(),t.hasClass("main-comment")?t.closest(".socialv-activity-parent").find(".activity-comments.socialv-form").prepend(e):t.closest(".acomment-options").after(e),t.addClass("active"),e.slideDown(),o("html, body").stop().animate({scrollTop:o(e).offset().top-100},500),jQuery("body").hasClass("buddypress-giphy-active")&&(a=o(this).attr("id").split("-"),0===o("#activity-"+a[2]+" .activity-comments #ac-form-"+a[2]+" .ac-reply-content .bp-giphy-comment-html-container").length)&&o("#activity-"+a[2]+" .activity-comments #ac-form-"+a[2]+" .ac-textarea").after('<div class="bp-giphy-comment-html-container bp-giphy-html-container"><div class="bp-giphy-media-search"><div class="bp-giphy-icon" title="'+bpgp_data.add_gif_text+'"><i class="wb-icons wb-icon-gif"></i></div><div class="bp-giphy-media-search-dropdown"></div></div></div>')}),o("body").hasClass("bp-legacy buddypress-giphy-active")&&o("div.activity").on("click",function(e){var e=o(e.target);(e.hasClass("socialv-acomment-reply")||e.parent().hasClass("socialv-acomment-reply"))&&(e=(e=e.parent().hasClass("socialv-acomment-reply")?e.parent():e).attr("id").split("-"),0===o("#activity-"+e[2]+" .activity-comments #ac-form-"+e[2]+" .ac-reply-content .bp-giphy-comment-html-container").length)&&o("#activity-"+e[2]+" .activity-comments #ac-form-"+e[2]+" .ac-textarea").after('<div class="bp-giphy-comment-html-container bp-giphy-html-container"><div class="bp-giphy-media-search"><div class="bp-giphy-icon" data-bs-toggle="tooltip" data-bs-placement="top" title="" data-bs-original-title="'+bpgp_data.add_gif_text+'"><i class="wb-icons wb-icon-gif"></i></div><div class="bp-giphy-media-search-dropdown"></div></div></div>')}),o(document).on("click",".socialv-get-liked-users",function(e){e.preventDefault();e=o(this).data("id");return o.ajax({type:"GET",url:ajaxurl,data:{action:"socialv_activity_liked_users",id:e},success:function(e){e&&(o("#liked-users-modal .modal-body").html(e),o("#liked-users-modal").modal("show"))}}),!1}),o(".select-media-checkbox.multi").on("change",function(e){var t,a=o(".select-media-checkbox.single");void 0===e.originalEvent?(t=!0,a.each(function(){this.checked?o(this).closest(".socialv-media-container").addClass("socialv-selected"):o(this).closest(".socialv-media-container").removeClass("socialv-selected"),t=t&&this.checked}),this.checked=t):(a.prop("checked",this.checked),a.closest(".socialv-media-container").removeClass("socialv-selected"),this.checked&&a.closest(".socialv-media-container").addClass("socialv-selected"))}),o(".select-media-checkbox.single").on("change",function(){o(".select-media-checkbox.multi").trigger("change")}),o(".socialv-delete-media").stop().click(function(e){var a,i,s;if(e.preventDefault(),confirm(socialv_global_script.alert_media))return a=o(this),e="media",i="",(s=!!a.hasClass("multi-delete"))?o(".select-media-checkbox.single[type=checkbox]:checked").each(function(){i+=""==i?o(this).val():","+o(this).val()}):(i=a.data("id"),e="gallery"),o.ajax({type:"GET",dataType:"json",url:ajaxurl,data:{action:"user_delete_media",id:i,type:e},success:function(e){var t;s&&!0===e.status?(t=i.split(","),o.each(t,function(e){o(".select-media-checkbox.single[value="+t[e]+"]").closest(".mpp-media").remove()})):a.closest(".mpp-item").remove()}}),!1});var a=o(window),t=(a.scroll(function(){ScrollGallery();var e,t=o(".load-more:visible");t.get(0)&&!t.data("bpaa-autoloaded")&&(e=t.offset().top-3e3,a.scrollTop()+a.height()>e)&&(t.data("bpaa-autoloaded",1),t.find("a").trigger("click"))}),o(void 0));if(t.parent().hasClass("load-more"))return bp_ajax_request&&bp_ajax_request.abort(),o("#buddypress li.load-more").addClass("loading"),oldest_page=activity_oldestpage+1,just_posted=[],o(".activity-list li.just-posted").each(function(){just_posted.push(o(this).attr("id").replace("activity-",""))}),load_more_args={action:"activity_get_older_updates",cookie:bp_get_cookies(),page:oldest_page,exclude_just_posted:just_posted.join(",")},(load_more_search=bp_get_querystring("s"))&&(load_more_args.search_terms=load_more_search),bp_ajax_request=jq.post(ajaxurl,load_more_args,function(e){o("#buddypress li.load-more").removeClass("loading"),activity_oldestpage=oldest_page;e=o(e.contents);o("#buddypress ul.activity-list").append(e),t.parent().hide(),bp_legacy_theme_hide_comments(e),window.instgrm&&window.instgrm.Embeds.process()},"json"),!1;LoadbpGiphy(),o("div.activity").on("click",function(e){var a,i,t,s=o(e.target);if(s.hasClass("socialv_delete-activity"))return e=(a=s.parents("div.activity ul li")).attr("id").substr(9,a.attr("id").length),t=s.attr("href").split("_wpnonce="),i=a.prop("class").match(/date-recorded-([0-9]+)/),t=t[1],s.addClass("loading"),confirm(socialv_global_script.alert_media)&&o.post(ajaxurl,{action:"delete_activity",cookie:bp_get_cookies(),id:e,_wpnonce:t},function(e){var t;e[0]+e[1]==="-1"?(a.prepend(e.substr(2,e.length)),a.children("#message").hide().fadeIn(300)):(a.slideUp(300),e=a.closest(".activity-item"),t=s.data("success"),t=jQuery('<div id="template-notices" role="alert" aria-atomic="true"><div id="message" class="bp-template-notice updated"><p>'+t+"</p></div></div>"),e.after(t),setTimeout(function(){var e=jQuery("#message");0<e.length&&e.parent().remove()},5e3),i&&activity_last_recorded===i[1]&&(newest_activities="",activity_last_recorded=0))}),!1})})}(jQuery),document.addEventListener("click",function(i){var e,s,o,c,t,n,a,l,r,d;if(i.target.classList.contains("socialv-user-activity-btn"))return i.preventDefault(),e=i.target.getAttribute("data-id"),s=i.target.getAttribute("data-unpin"),o=i.target.getAttribute("data-pin"),c=i.target,t="_socialv_activity_liked_users",n=c.classList.contains("has-socialv-pin"),a=c.classList.contains("has-socialv-post"),l=i.target.getAttribute("data-type"),r="",c.classList.add("adding"),c.innerHTML='<i class="icon-loader-circle"></i>',a&&(t="_socialv_posts_liked_users"),n&&(t=i.target.getAttribute("component"),"groups"==l)&&(r=i.target.getAttribute("group-id")),(d=new XMLHttpRequest).open("GET",ajaxurl+"?action=socialv_user_activity_callback&id="+e+"&meta_key="+t+"&data_type="+l+"&group_id="+r,!0),d.setRequestHeader("Content-Type","application/json"),d.onload=function(){var e,t,a;200===d.status&&(e=JSON.parse(d.responseText).data,n?((t=document.createElement("i")).className="icon-pin pinicon me-3 mt-2",a=i.target.parentNode.closest("ul").previousElementSibling,e&&!0===e.status?(c.classList.add("adding"),c.innerHTML=s,c.setAttribute("data-unpin",s),c.classList.add("added"),a.parentNode.insertBefore(t,a)):(c.innerHTML=o,c.setAttribute("data-unpin",s),c.classList.remove("added"),(t=i.target.parentNode.closest("ul").parentNode.querySelector("i.pinicon"))&&t.remove())):e?(c.classList.remove("adding"),a=c.innerHTML,c.innerHTML='<i class="iconly-Heart icbo"></i>'+a+(t="<span>"+e+"</span>"),c.classList.add("liked"),c.classList.contains("added")?(c.innerHTML='<i class="iconly-Heart icli"></i>'+a+t,c.classList.remove("added")):(c.innerHTML='<i class="iconly-Heart icbo"></i>'+a+t,c.classList.add("added"))):(c.classList.remove("adding"),c.classList.remove("liked"),c.innerHTML='<i class="iconly-Heart icli"></i>'+c.innerHTML)),c.innerHTML=c.innerHTML.replace('<i class="icon-loader-circle"></i>',"")},d.send(),!1}),document.addEventListener("DOMContentLoaded",function(){document.querySelector("body").addEventListener("click",function(e){var t,a,i,s;e.target.matches(".hide-post-btn")&&(e.preventDefault(),t=e.target.closest(".activity-item"),a=e.target.dataset.activity_id,i=e.target.dataset.id,s=e.target.dataset.type,fetch(ajaxurl,{method:"POST",body:new URLSearchParams({action:"hide_activity_post",activity_id:a,user_id:i,data_type:s})}).then(function(e){return e.json()}).then(function(e){"hide"===s?(t.querySelector(".socialv_activity_inner").style.display="none",t.querySelector(".undo_activity_post").style.display="block",!0===e.success&&(t.style.display="block")):"undo"===s&&(t.style.display="block",t.querySelector(".socialv_activity_inner").style.display="block",t.querySelector(".undo_activity_post").style.display="none")}))})}),document.addEventListener("click",function(a){var i,s,e,t,o;if("socialv_ac_form_submit"===a.target.getAttribute("name"))return a.preventDefault(),t=(i=jq(a.target).closest("form")).attr("id").split("-"),s=!1,e=i.parent().hasClass("activity-comments")?(s=!0,t[2]):i.parent().attr("id").split("-")[1],o=i.find("textarea").val(),i.find("div.error").hide(),jq(a.target).addClass("loading").prop("disabled",!0),i.find("textarea").addClass("loading").prop("disabled",!0),t={action:"new_activity_comment",cookie:bp_get_cookies(),_wpnonce_new_activity_comment:jq("#_wpnonce_new_activity_comment_"+t[2]).val(),comment_id:e,form_id:t[2],content:o},(o=jq("#_bp_as_nonce_"+e).val())&&(t["_bp_as_nonce_"+e]=o),jq.post(ajaxurl,t,function(e){var t;jq(a.target).removeClass("loading"),i.find("textarea").removeClass("loading"),e[0]+e[1]==="-1"?i.append(jq(e.substr(2,e.length)).hide().fadeIn(200)):(t=i.parent(),0===(t=1==s?i.closest(".modal-footer").prev(".modal-body").find(".activity-comments-list"):t).children("ul").length&&t.append("<ul></ul>"),e=jq.trim(e),t.children("ul").append(jq(e).hide().fadeIn(200)),t.parent().addClass("has-comments"),t.scrollTop(t.prop("scrollHeight")),i.find("textarea").val(""),jq(a.target).prop("disabled",!1),i.find("textarea").prop("disabled",!1),s||i.hide())}),!1});
;